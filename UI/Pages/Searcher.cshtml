@page
@model SearcherModel
@{
    ViewData["Title"] = "Search Results";
}

<div id="top"></div>


<div class="container mt-4 mb-5">
    <div class="row">
        <!-- üß© Columna principal con resultados -->
        <div class="col-md-9">
            <h4 class="text-primary mb-4">Showing results for: ‚Äú@Model.Query‚Äù</h4>

            <!-- Games -->
            @if (Model.Games.Any())
            {
                <h5 id="games" class="text-primary">Games</h5>
                <div class="scroll-section mb-5">
                    @foreach (var game in Model.Games)
                    {
                        <a href="/Game/Details/@game.Id" class="card-blue-light text-decoration-none me-3">
                            <img src="@game.HeaderUrl" class="card-img-top rounded-top"
                                style="height: 200px; object-fit: cover;" />
                            <div class="p-2">
                                <strong class="text-dark">@game.Title</strong>
                            </div>
                        </a>
                    }
                </div>
            }

            <!-- Users -->
            @if (Model.Users.Any())
            {
                <h5 id="users" class="text-primary">Users</h5>
                <div class="scroll-section mb-5">
                    @foreach (var user in Model.Users)
                    {
                        <a href="/Profile/@user.Id"
                            class="card-blue-light text-decoration-none me-3 d-flex align-items-center p-2"
                            style="width: 220px;">
                            <img src="@user.AvatarUrl" alt="@user.Username" class="rounded-circle me-3" width="48" height="48" />
                            <div class="text-dark">
                                <strong>@user.Username</strong>
                            </div>
                        </a>
                    }
                </div>
            }

            <!-- Reviews -->
            @if (Model.Reviews.Any())
            {
                <h5 id="reviews" class="text-primary">Reviews</h5>
                <div class="scroll-section mb-5">
                    @foreach (var review in Model.Reviews)
                    {
                        <a href="/Reviews/Details/@review.Id" class="card-blue-light text-decoration-none me-3"
                            style="width: 300px;">
                            <img src="@review.GameImageUrl" class="card-img-top rounded-top"
                                style="height: 140px; object-fit: cover;" />
                            <div class="p-2 text-dark">
                                <strong>@review.UserName</strong><br />
                                <span class="text-muted small">
                                    @review.Content.Substring(0, Math.Min(review.Content.Length, 100))...
                                </span>
                            </div>
                        </a>
                    }
                </div>
            }

            <!-- Lists -->
            @if (Model.Lists.Any())
            {
                <h5 id="lists" class="text-primary">Lists</h5>
                <div class="scroll-section mb-5">
                    @foreach (var list in Model.Lists)
                    {
                        <a href="/Lists/Details/@list.Id" class="card-blue-light text-decoration-none me-3"
                            style="width: 260px;">
                            <div class="p-3 text-dark">
                                <strong>@list.Name</strong><br />
                                <span class="text-muted small">
                                    @list.Description?.Substring(0, Math.Min(list.Description.Length, 80))...
                                </span>
                            </div>
                        </a>
                    }
                </div>
            }
        </div>

        <!-- üß≠ Men√∫ lateral de categor√≠as -->
<div class="col-md-3">
    <h6 class="text-secondary mb-3" style="font-size: 0.9rem;">Show results for</h6>
    <div class="sidebar-links">
        <a class="@(Model.Filter is null or "all" ? "fw-bold text-primary" : "")"
           href="?query=@Model.Query#top">All</a>
        <a class="@(Model.Filter == "games" ? "fw-bold text-primary" : "")"
           href="?query=@Model.Query&filter=games#games">Games</a>
        <a class="@(Model.Filter == "users" ? "fw-bold text-primary" : "")"
           href="?query=@Model.Query&filter=users#users">Users</a>
        <a class="@(Model.Filter == "reviews" ? "fw-bold text-primary" : "")"
           href="?query=@Model.Query&filter=reviews#reviews">Reviews</a>
        <a class="@(Model.Filter == "lists" ? "fw-bold text-primary" : "")"
           href="?query=@Model.Query&filter=lists#lists">Lists</a>
    </div>
</div>


    </div>
